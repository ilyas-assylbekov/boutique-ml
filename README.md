# Домашнее задание 13: Прогнозирование продаж для бутика

## Описание задания
Разработан сервис для прогнозирования продаж бутика с использованием машинного обучения. Проект включает обработку данных, обучение модели и REST API для получения прогнозов.

## Структура проекта
```
boutique-ml/
├── data/
│   ├── raw/            # Исходные данные о продажах
│   └── processed/      # Подготовленные для модели данные
├── src/
│   ├── api/           # FastAPI приложение
│   │   ├── main.py    # Основной файл API
│   │   └── __init__.py
│   ├── data/          # Модуль обработки данных
│   │   ├── data_processing.py
│   │   └── __init__.py
│   └── models/        # Модуль с моделью ML
│       ├── train_model.py
│       └── __init__.py
├── models/            # Директория для сохранения обученной модели
├── Dockerfile         # Конфигурация Docker
├── process_data.py    # Скрипт обработки данных
└── README.md
```

## Реализованная функциональность

1. **Обработка данных** (`src/data/data_processing.py`):
   - Агрегация дневных метрик продаж
   - Расчет сезонных показателей
   - Анализ продуктовых метрик
   - Обработка ценовых показателей

2. **Модель машинного обучения** (`src/models/train_model.py`):
   - Использован LightGBM для прогнозирования
   - Реализована кросс-валидация
   - Включены календарные и лаговые признаки
   - Добавлены скользящие средние

3. **REST API** (`src/api/main.py`):
   - Эндпоинт прогнозирования `/predict/`
   - Получение метрик модели `/model/metrics`
   - Анализ важности признаков `/model/feature-importance`
   - Проверка здоровья сервиса `/health`

## Использованные технологии
- Python 3.10
- FastAPI
- LightGBM
- Pandas
- Poetry
- Docker

## Запуск проекта

1. **Установка зависимостей:**
```bash
poetry install
```

2. **Обработка данных:**
```bash
poetry run python process_data.py
```

3. **Обучение модели:**
```bash
poetry run python -m src.models.train_model
```

4. **Запуск API:**
```bash
poetry run uvicorn src.api.main:app --reload
```

## Метрики качества модели
- RMSE (Root Mean Square Error)
- MAE (Mean Absolute Error)
- R² (коэффициент детерминации)
- MAPE (Mean Absolute Percentage Error)

## Примеры запросов к API

1. **Получение прогноза:**
```bash
curl -X POST "http://localhost:8000/predict/" \
     -H "Content-Type: application/json" \
     -d '{"date": "2025-02-10T00:00:00"}'
```

2. **Получение метрик модели:**
```bash
curl "http://localhost:8000/model/metrics"
```

## Возможные улучшения
1. Добавление внешних факторов (погода, праздники)
2. Реализация многошаговых прогнозов
3. Добавление интервалов предсказания
4. Оптимизация гиперпараметров модели
5. Реализация A/B тестирования прогнозов

## Автор
Ильяс Асылбеков